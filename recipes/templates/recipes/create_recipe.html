{% extends "base.html" %}
{% block title %}Add New Recipe{% endblock %}

{% block content %}
<section class="max-w-4xl mx-auto px-6 py-12">
    <h1 class="text-4xl font-bold text-gray-800 mb-6 text-center">Add a New Recipe</h1>

    {% if messages %}
    {% for message in messages %}
    <div class="bg-green-100 text-green-700 px-4 py-2 rounded mb-4">{{ message }}</div>
    {% endfor %}
    {% endif %}

    <form method="POST" enctype="multipart/form-data" class="bg-white shadow-lg rounded-lg p-8 space-y-6">
        {% csrf_token %}

        <!-- Title -->
        <div>
            <label class="block font-semibold mb-2">Recipe Title</label>
            <input type="text" name="title" required
                class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500">
        </div>

        <!-- Description -->
        <div>
            <label class="block font-semibold mb-2">Description</label>
            <textarea name="description" rows="3" required
                class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500"></textarea>
        </div>

        <!-- Ingredients -->
        <div>
            <label class="block font-semibold mb-2">Ingredients (separate by commas)</label>
            <textarea name="ingredients" rows="4" required
                class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500"></textarea>
        </div>

        <!-- Instructions -->
        <div>
            <label class="block font-semibold mb-2">Instructions</label>
            <textarea name="instructions" rows="5" required
                class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500"></textarea>
        </div>

        <!-- Category -->
        <div>
            <label class="block font-semibold mb-2">Category</label>
            <select name="category" required
                class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500">
                <option value="">Select a Category</option>
                {% for category in categories %}
                <option value="{{category.id }}">{{ category.name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Image Upload -->
        <div x-data="{ preview: null }">
            <label class="block font-semibold mb-2">Recipe Image</label>
            <input type="file" name="image" accept="image/*"
                x-on:change="preview = URL.createObjectURL($event.target.files[0])"
                class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500">
            <template x-if="preview">
                <img :src="preview" alt="Image Preview" class="mt-4 h-48 object-cover rounded-lg shadow">
            </template>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
            <button type="submit" class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition">
                Add Recipe
            </button>
        </div>
    </form>
</section>
{% endblock %} 