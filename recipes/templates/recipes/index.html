{% extends "base.html" %}
{% load static %}

{% load recipe_extras %}



{% block title %}RecipeHub â€” Home{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative bg-gradient-to-r from-orange-400 via-red-400 to-pink-500 text-white">
    <div class="max-w-7xl mx-auto px-6 py-20 flex flex-col items-center text-center">
        <h1 class="text-5xl font-bold mb-4">Discover & Share Delicious Recipes</h1>
        <p class="text-lg max-w-2xl mb-6">
            Your personal hub for mouth-watering dishes, cooking tips, and creative food ideas.
        </p>
        <!-- Search -->
        <form action="{% url 'recipes:search_recipes' %}" method="get" class="w-full max-w-md flex bg-white rounded-lg overflow-hidden shadow-lg">
            <input type="text" name="q" placeholder="Search recipes..."
                class="flex-1 px-4 py-2 text-gray-700 outline-none">
            <button type="submit"
                class="bg-orange-500 px-4 py-2 text-white hover:bg-orange-600 transition">Search</button>
        </form>
    </div>
</section>

<!-- Categories -->
<section class="py-12 bg-gray-50">
    <div class="max-w-7xl mx-auto px-6">
        <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Browse by Category</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            {% for category in categories %}
            <a href="{% url 'recipes:category_detail' category.slug %}"
                class="bg-white shadow hover:shadow-lg rounded-lg overflow-hidden transform hover:-translate-y-1 transition">
                <img src="{{ category.image.url }}" alt="{{ category.name }}" class="h-32 w-full object-cover">
                <div class="p-4 text-center font-semibold">{{ category.name }}</div>
            </a>
            {% empty %}
            <p class="text-center col-span-4 text-gray-500">No categories available yet.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Featured Recipes -->
<section class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-6">
        <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Featured Recipes</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for recipe in recipes %}

            <div
                class="bg-white border border-gray-200 rounded-xl shadow-md hover:shadow-xl overflow-hidden transform hover:-translate-y-1 transition duration-300">
            
                <!-- Image -->
                {% if recipe.image %}
                <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="h-52 w-full object-cover rounded-t-xl">
                {% elif recipe.category.image %}
                <img src="{{ recipe.category.image.url }}" alt="{{ recipe.title }}" class="h-52 w-full object-cover rounded-t-xl">
                {% else %}
                <img src="{% static 'recipes/images/default.jpg' %}" alt="{{ recipe.title }}"
                    class="h-52 w-full object-cover rounded-t-xl">
                {% endif %}
            
                <!-- Content -->
                <div class="p-5">
            
                    <!-- Title + Rating in Same Row -->
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-lg font-semibold text-gray-800">{{ recipe.title }}</h3>
            
                        <!-- Rating -->
                        <div class="flex items-center">
                            {% for i in "12345" %}
                            {% if recipe.avg_rating|add:0 >= i|add:0 %}
                            <!-- Full Star -->
                            <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 
                                  1.902 0l1.347 4.134a1 1 0 
                                  00.95.69h4.356c.969 0 1.371 1.24.588 
                                  1.81l-3.523 2.56a1 1 0 
                                  00-.364 1.118l1.347 4.134c.3.921-.755 
                                  1.688-1.54 1.118l-3.523-2.56a1 1 
                                  0 00-1.176 0l-3.523 2.56c-.784.57-1.838-.197-1.54-1.118l1.347-4.134a1 1 
                                  0 00-.364-1.118L2.08 9.561c-.783-.57-.38-1.81.588-1.81h4.356a1 1 0 
                                  00.95-.69l1.347-4.134z" />
                            </svg>
                            {% else %}
                            <!-- Empty Star -->
                            <svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 
                                  1.603-.921 1.902 0l1.347 4.134a1 1 0 
                                  00.95.69h4.356c.969 0 1.371 1.24.588 
                                  1.81l-3.523 2.56a1 1 0 
                                  00-.364 1.118l1.347 4.134c.3.921-.755 
                                  1.688-1.54 1.118l-3.523-2.56a1 1 
                                  0 00-1.176 0l-3.523 2.56c-.784.57-1.838-.197-1.54-1.118l1.347-4.134a1 1 
                                  0 00-.364-1.118L2.08 9.561c-.783-.57-.38-1.81.588-1.81h4.356a1 1 0 
                                  00.95-.69l1.347-4.134z" />
                            </svg>
                            {% endif %}
                            {% endfor %}
                        </div>
                    </div>
            
                    <!-- Description -->
                    <p class="text-gray-600 text-sm mb-4">{{ recipe.description|truncatewords:15 }}</p>
            
                    <!-- Button -->
                    <a href="{% url 'recipes:recipe_detail' recipe.slug %}"
                        class="block text-center bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition">
                        View Recipe
                    </a>
                </div>
            </div>


            {% empty %}
            <p class="text-center col-span-3 text-gray-500">No featured recipes yet.</p>
            {% endfor %}
        </div>
    </div>
</section>


{% endblock %}